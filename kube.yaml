apiVersion: v1
kind: Pod
metadata:
  name: authentication
  labels:
    app: authentication
spec:
  containers:
  - name: auth-cont
    image: auth-im
    imagePullPolicy: IfNotPresent
    resources:
      limits:
        memory: "500Mi"
        cpu: "500m"
    ports:
    - name:  port1
      containerPort: 3000
      protocol: TCP
  
---  
apiVersion: v1
kind: Pod
metadata:
  name: registration
  labels: 
    app: registration
spec:
  containers:
  - name: reg-cont
    image: reg-im
    imagePullPolicy: IfNotPresent
    resources:
      limits:
        memory: "500Mi"
        cpu: "500m"
    ports:
    - name:  port2
      containerPort: 3000
      protocol: TCP

---
apiVersion: v1
kind: Pod
metadata:
  name: patientdata
  labels:
    app: patientdata
spec:
  containers:
  - name: pd-cont
    image: pd-im
    imagePullPolicy: IfNotPresent
    resources:
      limits:
        memory: "500Mi"
        cpu: "500m"
    ports:
    - name:  port3
      containerPort: 3000
      protocol: TCP
      
---
apiVersion: v1 
kind: Service 
metadata:
  name: auth-service 
spec:
  type: NodePort
  selector:
    app: authentication
  ports:
    - nodePort: 30002
      port: 3000
      targetPort: 3000
---
apiVersion: v1 
kind: Service 
metadata:
  name: reg-service 
spec:
  type: NodePort
  selector:
    app: registration
  ports:
    - nodePort: 30003
      port: 3000
      targetPort: 3000
---
apiVersion: v1 
kind: Service 
metadata:
  name: pd-service 
spec:
  type: NodePort
  selector:
    app: patientdata
  ports:
    - nodePort: 30004
      port: 3000
      targetPort: 3000
